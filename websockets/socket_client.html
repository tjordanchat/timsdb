<!DOCTYPE html>
<html lang="en">
<head>
  <title>WebSocket Echo Client</title>
  <meta charset="UTF-8" />
  <script>
    "use strict";
    var socket, mydata, current_node, elem;
    // Initialize everything when the window finishes loading
    window.addEventListener("load", function(event) {
      var status = document.getElementById("status");
      var url = document.getElementById("url");
      var open = document.getElementById("open");
      var close = document.getElementById("close");
      var send = document.getElementById("send");
      var text = document.getElementById("text");
      var image = document.getElementById("orb");
      var message = document.getElementById("message");
      var message2 = document.getElementById("message2");
	    var node1 = document.getElementById('a');

			current_node=node1;
      status.textContent = "Not Connected";
      url.value = "ws://fdcdwdevdb01:8888";
      close.disabled = true;
      send.disabled = true;
		  message2.textContent="Initialized";

      // Create a new connection when the Connect button is clicked.
      open.addEventListener("click", function(event) {
        open.disabled = true;
        socket = new WebSocket(url.value, "echo-protocol");

        socket.addEventListener("open", function(event) {
          close.disabled = false;
          send.disabled = false;
          status.textContent = "Connected";
        });

        // Display messages received from the server
        socket.addEventListener("message", function(event) {
		  			mydata = event.data.substring(1,event.data.length-3);
		  			message.textContent = "Server Says: '" + mydata.toString() + "'";
		  			current_node.setAttribute("style","fill:none;stroke:black");
		  			message2.textContent="got here";
		  			try {
		  					elem = document.getElementById(mydata.toString());
		  					if(typeof elem !== 'undefined' && elem !== null) {
		  							message2.textContent="Set current_element: " + current_node.id.toString();
		  							current_node = elem;
		  					} else {
		  						message2.textContent = "undefined";
		  					}
		  			} catch (err) {
		  					message2.textContent = "undefined";
		  			}
		  			current_node.setAttribute("style","fill:green");

      	});

        // Display any errors that occur
        socket.addEventListener("error", function(event) {
          message.textContent = "Error: " + event;
        });

        socket.addEventListener("close", function(event) {
          open.disabled = false;
          status.textContent = "Not Connected";
        });
      });

      // Close the connection when the Disconnect button is clicked
      close.addEventListener("click", function(event) {
        close.disabled = true;
        send.disabled = true;
        message.textContent = "";
        socket.close();
      });

      // Send text to the server when the Send button is clicked
      send.addEventListener("click", function(event) {
        socket.send(text.value);
        text.value = "";
      });
    });
  </script>
</head>
<body>
  Status: <span id="status"></span><br />
  URL: <input id="url" /><br />
  <input id="open" type="button" value="Connect" />&nbsp;
  <input id="close" type="button" value="Disconnect" /><br />
  <input id="send" type="button" value="Send" />&nbsp;
  <input id="text" /><br />
  <span id="message"></span><br />
  <span id="message2"></span><br />

	 <!-- --------------------------------------------------------------------------------------------------------- -->
<svg width="4.35in" height="0.60in"
 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1.33333 1.33333) rotate(0) translate(4 40)">
<title>dwh</title>
<polygon style="fill:white;stroke:white;" points="-4,4 -4,-40 310,-40 310,4 -4,4"/>
<!-- a -->
<g id="node1" class="node"><title>a</title>
<ellipse id="a" fill="none" stroke="black" cx="18" cy="-18" rx="18" ry="18"/>
<text text-anchor="middle" x="18" y="-12" style="font-family:Nimbus Roman No9 L;font-weight:regular;font-size:11.34pt;">a</text>
</g>
<!-- b -->
<g id="node3" class="node"><title>b</title>
<ellipse id="b" style="fill:none;stroke:black;" cx="72" cy="-18" rx="18" ry="18"/>
<text text-anchor="middle" x="72" y="-12" style="font-family:Nimbus Roman No9 L;font-weight:regular;font-size:11.34pt;">b</text>
</g>
<!-- a&#45;&gt;b -->
<g id="edge2" class="edge"><title>a&#45;&gt;b</title>
<path style="fill:none;stroke:black;" d="M36,-18C39,-18 41,-18 44,-18"/>
<polygon style="fill:black;stroke:black;" points="44,-21.5001 54,-18 44,-14.5001 44,-21.5001"/>
</g>
<!-- c -->
<g id="node4" class="node"><title>c</title>
<ellipse id="c" style="fill:none;stroke:black;" cx="126" cy="-18" rx="18" ry="18"/>
<text text-anchor="middle" x="126" y="-12" style="font-family:Nimbus Roman No9 L;font-weight:regular;font-size:11.34pt;">c</text>
</g>
<!-- b&#45;&gt;c -->
<g id="edge3" class="edge"><title>b&#45;&gt;c</title>
<path style="fill:none;stroke:black;" d="M90,-18C93,-18 95,-18 98,-18"/>
<polygon style="fill:black;stroke:black;" points="98,-21.5001 108,-18 98,-14.5001 98,-21.5001"/>
</g>
<!-- d -->
<g id="node5" class="node"><title>d</title>
<ellipse id="d" style="fill:none;stroke:black;" cx="180" cy="-18" rx="18" ry="18"/>
<text text-anchor="middle" x="180" y="-12" style="font-family:Nimbus Roman No9 L;font-weight:regular;font-size:11.34pt;">d</text>
</g>
<!-- c&#45;&gt;d -->
<g id="edge4" class="edge"><title>c&#45;&gt;d</title>
<path style="fill:none;stroke:black;" d="M144,-18C147,-18 149,-18 152,-18"/>
<polygon style="fill:black;stroke:black;" points="152,-21.5001 162,-18 152,-14.5001 152,-21.5001"/>
</g>
<!-- e -->
<g id="node6" class="node"><title>e</title>
<ellipse id="e" style="fill:none;stroke:black;" cx="234" cy="-18" rx="18" ry="18"/>
<text text-anchor="middle" x="234" y="-12" style="font-family:Nimbus Roman No9 L;font-weight:regular;font-size:11.34pt;">e</text>
</g>
<!-- d&#45;&gt;e -->
<g id="edge5" class="edge"><title>d&#45;&gt;e</title>
<path style="fill:none;stroke:black;" d="M198,-18C201,-18 203,-18 206,-18"/>
<polygon style="fill:black;stroke:black;" points="206,-21.5001 216,-18 206,-14.5001 206,-21.5001"/>
</g>
<!-- f -->
<g id="node7" class="node"><title>f</title>
<ellipse id="f" style="fill:none;stroke:black;" cx="288" cy="-18" rx="18" ry="18"/>
<text text-anchor="middle" x="288" y="-12" style="font-family:Nimbus Roman No9 L;font-weight:regular;font-size:11.34pt;">f</text>
</g>
<!-- e&#45;&gt;f -->
<g id="edge6" class="edge"><title>e&#45;&gt;f</title>
<path style="fill:none;stroke:black;" d="M252,-18C255,-18 257,-18 260,-18"/>
<polygon style="fill:black;stroke:black;" points="260,-21.5001 270,-18 260,-14.5001 260,-21.5001"/>
</g>
</g>
</svg>
	 <!-- --------------------------------------------------------------------------------------------------------- -->
 </body>
</html>
